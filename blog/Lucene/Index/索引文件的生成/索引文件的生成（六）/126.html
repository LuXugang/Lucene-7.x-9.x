<!doctype html>
<html>
<head>
<meta charset='UTF-8'><meta name='viewport' content='width=device-width initial-scale=1'>
<title>ç´¢å¼•æ–‡ä»¶çš„ç”Ÿæˆï¼ˆå…­ï¼‰-html</title><link href='https://fonts.loli.net/css?family=Open+Sans:400italic,700italic,700,400&subset=latin,latin-ext' rel='stylesheet' type='text/css' /><style type='text/css'>html {overflow-x: initial !important;}:root { --bg-color: #ffffff; --text-color: #333333; --select-text-bg-color: #B5D6FC; --select-text-font-color: auto; --monospace: "Lucida Console",Consolas,"Courier",monospace; }
html { font-size: 14px; background-color: var(--bg-color); color: var(--text-color); font-family: "Helvetica Neue", Helvetica, Arial, sans-serif; -webkit-font-smoothing: antialiased; }
body { margin: 0px; padding: 0px; height: auto; bottom: 0px; top: 0px; left: 0px; right: 0px; font-size: 1rem; line-height: 1.42857143; overflow-x: hidden; background-image: inherit; background-size: inherit; background-attachment: inherit; background-origin: inherit; background-clip: inherit; background-color: inherit; tab-size: 4; background-position: inherit inherit; background-repeat: inherit inherit; }
iframe { margin: auto; }
a.url { word-break: break-all; }
a:active, a:hover { outline: 0px; }
.in-text-selection, ::selection { text-shadow: none; background: var(--select-text-bg-color); color: var(--select-text-font-color); }
#write { margin: 0px auto; height: auto; width: inherit; word-break: normal; word-wrap: break-word; position: relative; white-space: normal; overflow-x: visible; padding-top: 40px; }
#write.first-line-indent p { text-indent: 2em; }
#write.first-line-indent li p, #write.first-line-indent p * { text-indent: 0px; }
#write.first-line-indent li { margin-left: 2em; }
.for-image #write { padding-left: 8px; padding-right: 8px; }
body.typora-export { padding-left: 30px; padding-right: 30px; }
.typora-export .footnote-line, .typora-export li, .typora-export p { white-space: pre-wrap; }
@media screen and (max-width: 500px) { 
  body.typora-export { padding-left: 0px; padding-right: 0px; }
  #write { padding-left: 20px; padding-right: 20px; }
  .CodeMirror-sizer { margin-left: 0px !important; }
  .CodeMirror-gutters { display: none !important; }
}
#write li > figure:last-child { margin-bottom: 0.5rem; }
#write ol, #write ul { position: relative; }
img { max-width: 100%; vertical-align: middle; }
button, input, select, textarea { color: inherit; font-family: inherit; font-size: inherit; font-style: inherit; font-variant-caps: inherit; font-weight: inherit; font-stretch: inherit; line-height: inherit; }
input[type="checkbox"], input[type="radio"] { line-height: normal; padding: 0px; }
*, ::after, ::before { box-sizing: border-box; }
#write h1, #write h2, #write h3, #write h4, #write h5, #write h6, #write p, #write pre { width: inherit; }
#write h1, #write h2, #write h3, #write h4, #write h5, #write h6, #write p { position: relative; }
p { line-height: inherit; }
h1, h2, h3, h4, h5, h6 { break-after: avoid-page; break-inside: avoid; orphans: 2; }
p { orphans: 4; }
h1 { font-size: 2rem; }
h2 { font-size: 1.8rem; }
h3 { font-size: 1.6rem; }
h4 { font-size: 1.4rem; }
h5 { font-size: 1.2rem; }
h6 { font-size: 1rem; }
.md-math-block, .md-rawblock, h1, h2, h3, h4, h5, h6, p { margin-top: 1rem; margin-bottom: 1rem; }
.hidden { display: none; }
.md-blockmeta { color: rgb(204, 204, 204); font-weight: 700; font-style: italic; }
a { cursor: pointer; }
sup.md-footnote { padding: 2px 4px; background-color: rgba(238, 238, 238, 0.701961); color: rgb(85, 85, 85); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; cursor: pointer; }
sup.md-footnote a, sup.md-footnote a:hover { color: inherit; text-transform: inherit; text-decoration: inherit; }
#write input[type="checkbox"] { cursor: pointer; width: inherit; height: inherit; }
figure { overflow-x: auto; margin: 1.2em 0px; max-width: calc(100% + 16px); padding: 0px; }
figure > table { margin: 0px !important; }
tr { break-inside: avoid; break-after: auto; }
thead { display: table-header-group; }
table { border-collapse: collapse; border-spacing: 0px; width: 100%; overflow: auto; break-inside: auto; text-align: left; }
table.md-table td { min-width: 32px; }
.CodeMirror-gutters { border-right-width: 0px; background-color: inherit; }
.CodeMirror-linenumber { }
.CodeMirror { text-align: left; }
.CodeMirror-placeholder { opacity: 0.3; }
.CodeMirror pre { padding: 0px 4px; }
.CodeMirror-lines { padding: 0px; }
div.hr:focus { cursor: none; }
#write pre { white-space: pre-wrap; }
#write.fences-no-line-wrapping pre { white-space: pre; }
#write pre.ty-contain-cm { white-space: normal; }
.CodeMirror-gutters { margin-right: 4px; }
.md-fences { font-size: 0.9rem; display: block; break-inside: avoid; text-align: left; overflow: visible; white-space: pre; background-image: inherit; background-size: inherit; background-attachment: inherit; background-origin: inherit; background-clip: inherit; background-color: inherit; position: relative !important; background-position: inherit inherit; background-repeat: inherit inherit; }
.md-diagram-panel { width: 100%; margin-top: 10px; text-align: center; padding-top: 0px; padding-bottom: 8px; overflow-x: auto; }
#write .md-fences.mock-cm { white-space: pre-wrap; }
.md-fences.md-fences-with-lineno { padding-left: 0px; }
#write.fences-no-line-wrapping .md-fences.mock-cm { white-space: pre; overflow-x: auto; }
.md-fences.mock-cm.md-fences-with-lineno { padding-left: 8px; }
.CodeMirror-line, twitterwidget { break-inside: avoid; }
.footnotes { opacity: 0.8; font-size: 0.9rem; margin-top: 1em; margin-bottom: 1em; }
.footnotes + .footnotes { margin-top: 0px; }
.md-reset { margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: top; text-decoration: none; text-shadow: none; float: none; position: static; width: auto; height: auto; white-space: nowrap; cursor: inherit; line-height: normal; font-weight: 400; text-align: left; box-sizing: content-box; direction: ltr; background-position: 0px 0px; background-repeat: initial initial; }
li div { padding-top: 0px; }
blockquote { margin: 1rem 0px; }
li .mathjax-block, li p { margin: 0.5rem 0px; }
li { margin: 0px; position: relative; }
blockquote > :last-child { margin-bottom: 0px; }
blockquote > :first-child, li > :first-child { margin-top: 0px; }
.footnotes-area { color: rgb(136, 136, 136); margin-top: 0.714rem; padding-bottom: 0.143rem; white-space: normal; }
#write .footnote-line { white-space: pre-wrap; }
@media print { 
  body, html { border: 1px solid transparent; height: 99%; break-after: avoid; break-before: avoid; }
  #write { margin-top: 0px; padding-top: 0px; border-color: transparent !important; }
  .typora-export * { -webkit-print-color-adjust: exact; }
  html.blink-to-pdf { font-size: 13px; }
  .typora-export #write { padding-left: 32px; padding-right: 32px; padding-bottom: 0px; break-after: avoid; }
  .typora-export #write::after { height: 0px; }
}
.footnote-line { margin-top: 0.714em; font-size: 0.7em; }
a img, img a { cursor: pointer; }
pre.md-meta-block { font-size: 0.8rem; min-height: 0.8rem; white-space: pre-wrap; background-color: rgb(204, 204, 204); display: block; overflow-x: hidden; background-position: initial initial; background-repeat: initial initial; }
p > .md-image:only-child:not(.md-img-error) img, p > img:only-child { display: block; margin: auto; }
p > .md-image:only-child { display: inline-block; width: 100%; }
#write .MathJax_Display { margin: 0.8em 0px 0px; }
.md-math-block { width: 100%; }
.md-math-block:not(:empty)::after { display: none; }
[contenteditable="true"]:active, [contenteditable="true"]:focus { outline: 0px; box-shadow: none; }
.md-task-list-item { position: relative; list-style-type: none; }
.task-list-item.md-task-list-item { padding-left: 0px; }
.md-task-list-item > input { position: absolute; top: 0px; left: 0px; margin-left: -1.2em; margin-top: calc(1em - 10px); border: none; }
.math { font-size: 1rem; }
.md-toc { min-height: 3.58rem; position: relative; font-size: 0.9rem; border-top-left-radius: 10px; border-top-right-radius: 10px; border-bottom-right-radius: 10px; border-bottom-left-radius: 10px; }
.md-toc-content { position: relative; margin-left: 0px; }
.md-toc-content::after, .md-toc::after { display: none; }
.md-toc-item { display: block; color: rgb(65, 131, 196); }
.md-toc-item a { text-decoration: none; }
.md-toc-inner:hover { text-decoration: underline; }
.md-toc-inner { display: inline-block; cursor: pointer; }
.md-toc-h1 .md-toc-inner { margin-left: 0px; font-weight: 700; }
.md-toc-h2 .md-toc-inner { margin-left: 2em; }
.md-toc-h3 .md-toc-inner { margin-left: 4em; }
.md-toc-h4 .md-toc-inner { margin-left: 6em; }
.md-toc-h5 .md-toc-inner { margin-left: 8em; }
.md-toc-h6 .md-toc-inner { margin-left: 10em; }
@media screen and (max-width: 48em) { 
  .md-toc-h3 .md-toc-inner { margin-left: 3.5em; }
  .md-toc-h4 .md-toc-inner { margin-left: 5em; }
  .md-toc-h5 .md-toc-inner { margin-left: 6.5em; }
  .md-toc-h6 .md-toc-inner { margin-left: 8em; }
}
a.md-toc-inner { font-size: inherit; font-style: inherit; font-weight: inherit; line-height: inherit; }
.footnote-line a:not(.reversefootnote) { color: inherit; }
.md-attr { display: none; }
.md-fn-count::after { content: "."; }
code, pre, samp, tt { font-family: var(--monospace); }
kbd { margin: 0px 0.1em; padding: 0.1em 0.6em; font-size: 0.8em; color: rgb(36, 39, 41); background-color: rgb(255, 255, 255); border: 1px solid rgb(173, 179, 185); border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; box-shadow: rgba(12, 13, 14, 0.2) 0px 1px 0px, rgb(255, 255, 255) 0px 0px 0px 2px inset; white-space: nowrap; vertical-align: middle; background-position: initial initial; background-repeat: initial initial; }
.md-comment { color: rgb(162, 127, 3); opacity: 0.8; font-family: var(--monospace); }
code { text-align: left; }
a.md-print-anchor { white-space: pre !important; border: none !important; display: inline-block !important; position: absolute !important; width: 1px !important; right: 0px !important; outline: 0px !important; text-shadow: initial !important; background-position: 0px 0px !important; background-repeat: initial initial !important; }
.md-inline-math .MathJax_SVG .noError { display: none !important; }
.html-for-mac .inline-math-svg .MathJax_SVG { vertical-align: 0.2px; }
.md-math-block .MathJax_SVG_Display { text-align: center; margin: 0px; position: relative; text-indent: 0px; max-width: none; max-height: none; min-height: 0px; min-width: 100%; width: auto; overflow-y: hidden; display: block !important; }
.MathJax_SVG_Display, .md-inline-math .MathJax_SVG_Display { width: auto; margin: inherit; display: inline-block !important; }
.MathJax_SVG .MJX-monospace { font-family: var(--monospace); }
.MathJax_SVG .MJX-sans-serif { font-family: sans-serif; }
.MathJax_SVG { display: inline; font-style: normal; font-weight: 400; line-height: normal; zoom: 90%; text-indent: 0px; text-align: left; text-transform: none; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; padding: 0px; margin: 0px; }
.MathJax_SVG * { transition: none; }
.MathJax_SVG_Display svg { vertical-align: middle !important; margin-bottom: 0px !important; margin-top: 0px !important; }
.os-windows.monocolor-emoji .md-emoji { font-family: "Segoe UI Symbol", sans-serif; }
.md-diagram-panel > svg { max-width: 100%; }
[lang="mermaid"] svg, [lang="flow"] svg { max-width: 100%; height: auto; }
[lang="mermaid"] .node text { font-size: 1rem; }
table tr th { border-bottom-width: 0px; }
video { max-width: 100%; display: block; margin: 0px auto; }
iframe { max-width: 100%; width: 100%; border: none; }
.highlight td, .highlight tr { border: 0px; }
svg[id^="mermaidChart"] { line-height: 1em; }
mark { background-color: rgb(255, 255, 0); color: rgb(0, 0, 0); background-position: initial initial; background-repeat: initial initial; }
.md-html-inline .md-plain, .md-html-inline strong, mark .md-inline-math, mark strong { color: inherit; }
mark .md-meta { color: rgb(0, 0, 0); opacity: 0.3 !important; }


.CodeMirror { height: auto; }
.CodeMirror.cm-s-inner { background-image: inherit; background-size: inherit; background-attachment: inherit; background-origin: inherit; background-clip: inherit; background-color: inherit; background-position: inherit inherit; background-repeat: inherit inherit; }
.CodeMirror-scroll { overflow-y: hidden; overflow-x: auto; z-index: 3; }
.CodeMirror-gutter-filler, .CodeMirror-scrollbar-filler { background-color: rgb(255, 255, 255); }
.CodeMirror-gutters { border-right-width: 1px; border-right-style: solid; border-right-color: rgb(221, 221, 221); background-image: inherit; background-size: inherit; background-attachment: inherit; background-origin: inherit; background-clip: inherit; background-color: inherit; white-space: nowrap; background-position: inherit inherit; background-repeat: inherit inherit; }
.CodeMirror-linenumber { padding: 0px 3px 0px 5px; text-align: right; color: rgb(153, 153, 153); }
.cm-s-inner .cm-keyword { color: rgb(119, 0, 136); }
.cm-s-inner .cm-atom, .cm-s-inner.cm-atom { color: rgb(34, 17, 153); }
.cm-s-inner .cm-number { color: rgb(17, 102, 68); }
.cm-s-inner .cm-def { color: rgb(0, 0, 255); }
.cm-s-inner .cm-variable { color: rgb(0, 0, 0); }
.cm-s-inner .cm-variable-2 { color: rgb(0, 85, 170); }
.cm-s-inner .cm-variable-3 { color: rgb(0, 136, 85); }
.cm-s-inner .cm-string { color: rgb(170, 17, 17); }
.cm-s-inner .cm-property { color: rgb(0, 0, 0); }
.cm-s-inner .cm-operator { color: rgb(152, 26, 26); }
.cm-s-inner .cm-comment, .cm-s-inner.cm-comment { color: rgb(170, 85, 0); }
.cm-s-inner .cm-string-2 { color: rgb(255, 85, 0); }
.cm-s-inner .cm-meta { color: rgb(85, 85, 85); }
.cm-s-inner .cm-qualifier { color: rgb(85, 85, 85); }
.cm-s-inner .cm-builtin { color: rgb(51, 0, 170); }
.cm-s-inner .cm-bracket { color: rgb(153, 153, 119); }
.cm-s-inner .cm-tag { color: rgb(17, 119, 0); }
.cm-s-inner .cm-attribute { color: rgb(0, 0, 204); }
.cm-s-inner .cm-header, .cm-s-inner.cm-header { color: rgb(0, 0, 255); }
.cm-s-inner .cm-quote, .cm-s-inner.cm-quote { color: rgb(0, 153, 0); }
.cm-s-inner .cm-hr, .cm-s-inner.cm-hr { color: rgb(153, 153, 153); }
.cm-s-inner .cm-link, .cm-s-inner.cm-link { color: rgb(0, 0, 204); }
.cm-negative { color: rgb(221, 68, 68); }
.cm-positive { color: rgb(34, 153, 34); }
.cm-header, .cm-strong { font-weight: 700; }
.cm-del { text-decoration: line-through; }
.cm-em { font-style: italic; }
.cm-link { text-decoration: underline; }
.cm-error { color: red; }
.cm-invalidchar { color: red; }
.cm-constant { color: rgb(38, 139, 210); }
.cm-defined { color: rgb(181, 137, 0); }
div.CodeMirror span.CodeMirror-matchingbracket { color: rgb(0, 255, 0); }
div.CodeMirror span.CodeMirror-nonmatchingbracket { color: rgb(255, 34, 34); }
.cm-s-inner .CodeMirror-activeline-background { background-image: inherit; background-size: inherit; background-attachment: inherit; background-origin: inherit; background-clip: inherit; background-color: inherit; background-position: inherit inherit; background-repeat: inherit inherit; }
.CodeMirror { position: relative; overflow: hidden; }
.CodeMirror-scroll { height: 100%; outline: 0px; position: relative; box-sizing: content-box; background-image: inherit; background-size: inherit; background-attachment: inherit; background-origin: inherit; background-clip: inherit; background-color: inherit; background-position: inherit inherit; background-repeat: inherit inherit; }
.CodeMirror-sizer { position: relative; }
.CodeMirror-gutter-filler, .CodeMirror-hscrollbar, .CodeMirror-scrollbar-filler, .CodeMirror-vscrollbar { position: absolute; z-index: 6; display: none; }
.CodeMirror-vscrollbar { right: 0px; top: 0px; overflow: hidden; }
.CodeMirror-hscrollbar { bottom: 0px; left: 0px; overflow: hidden; }
.CodeMirror-scrollbar-filler { right: 0px; bottom: 0px; }
.CodeMirror-gutter-filler { left: 0px; bottom: 0px; }
.CodeMirror-gutters { position: absolute; left: 0px; top: 0px; padding-bottom: 30px; z-index: 3; }
.CodeMirror-gutter { white-space: normal; height: 100%; box-sizing: content-box; padding-bottom: 30px; margin-bottom: -32px; display: inline-block; }
.CodeMirror-gutter-wrapper { position: absolute; z-index: 4; border: none !important; background-position: 0px 0px !important; background-repeat: initial initial !important; }
.CodeMirror-gutter-background { position: absolute; top: 0px; bottom: 0px; z-index: 4; }
.CodeMirror-gutter-elt { position: absolute; cursor: default; z-index: 4; }
.CodeMirror-lines { cursor: text; }
.CodeMirror pre { border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; border-width: 0px; font-family: inherit; font-size: inherit; margin: 0px; white-space: pre; word-wrap: normal; color: inherit; z-index: 2; position: relative; overflow: visible; background-position: 0px 0px; background-repeat: initial initial; }
.CodeMirror-wrap pre { word-wrap: break-word; white-space: pre-wrap; word-break: normal; }
.CodeMirror-code pre { border-right-width: 30px; border-right-style: solid; border-right-color: transparent; width: fit-content; }
.CodeMirror-wrap .CodeMirror-code pre { border-right-style: none; width: auto; }
.CodeMirror-linebackground { position: absolute; left: 0px; right: 0px; top: 0px; bottom: 0px; z-index: 0; }
.CodeMirror-linewidget { position: relative; z-index: 2; overflow: auto; }
.CodeMirror-wrap .CodeMirror-scroll { overflow-x: hidden; }
.CodeMirror-measure { position: absolute; width: 100%; height: 0px; overflow: hidden; visibility: hidden; }
.CodeMirror-measure pre { position: static; }
.CodeMirror div.CodeMirror-cursor { position: absolute; visibility: hidden; border-right-style: none; width: 0px; }
.CodeMirror div.CodeMirror-cursor { visibility: hidden; }
.CodeMirror-focused div.CodeMirror-cursor { visibility: inherit; }
.cm-searching { background-color: rgba(255, 255, 0, 0.4); background-position: initial initial; background-repeat: initial initial; }
@media print { 
  .CodeMirror div.CodeMirror-cursor { visibility: hidden; }
}


:root {
    --side-bar-bg-color: #fafafa;
    --control-text-color: #777;
}

@include-when-export url(https://fonts.loli.net/css?family=Open+Sans:400italic,700italic,700,400&subset=latin,latin-ext);

html {
    font-size: 16px;
}

body {
    font-family: "Open Sans","Clear Sans","Helvetica Neue",Helvetica,Arial,sans-serif;
    color: rgb(51, 51, 51);
    line-height: 1.6;
}

#write {
    max-width: 860px;
  	margin: 0 auto;
  	padding: 30px;
    padding-bottom: 100px;
}
#write > ul:first-child,
#write > ol:first-child{
    margin-top: 30px;
}

a {
    color: #4183C4;
}
h1,
h2,
h3,
h4,
h5,
h6 {
    position: relative;
    margin-top: 1rem;
    margin-bottom: 1rem;
    font-weight: bold;
    line-height: 1.4;
    cursor: text;
}
h1:hover a.anchor,
h2:hover a.anchor,
h3:hover a.anchor,
h4:hover a.anchor,
h5:hover a.anchor,
h6:hover a.anchor {
    text-decoration: none;
}
h1 tt,
h1 code {
    font-size: inherit;
}
h2 tt,
h2 code {
    font-size: inherit;
}
h3 tt,
h3 code {
    font-size: inherit;
}
h4 tt,
h4 code {
    font-size: inherit;
}
h5 tt,
h5 code {
    font-size: inherit;
}
h6 tt,
h6 code {
    font-size: inherit;
}
h1 {
    padding-bottom: .3em;
    font-size: 2.25em;
    line-height: 1.2;
    border-bottom: 1px solid #eee;
}
h2 {
   padding-bottom: .3em;
    font-size: 1.75em;
    line-height: 1.225;
    border-bottom: 1px solid #eee;
}
h3 {
    font-size: 1.5em;
    line-height: 1.43;
}
h4 {
    font-size: 1.25em;
}
h5 {
    font-size: 1em;
}
h6 {
   font-size: 1em;
    color: #777;
}
p,
blockquote,
ul,
ol,
dl,
table{
    margin: 0.8em 0;
}
li>ol,
li>ul {
    margin: 0 0;
}
hr {
    height: 2px;
    padding: 0;
    margin: 16px 0;
    background-color: #e7e7e7;
    border: 0 none;
    overflow: hidden;
    box-sizing: content-box;
}

li p.first {
    display: inline-block;
}
ul,
ol {
    padding-left: 30px;
}
ul:first-child,
ol:first-child {
    margin-top: 0;
}
ul:last-child,
ol:last-child {
    margin-bottom: 0;
}
blockquote {
    border-left: 4px solid #dfe2e5;
    padding: 0 15px;
    color: #777777;
}
blockquote blockquote {
    padding-right: 0;
}
table {
    padding: 0;
    word-break: initial;
}
table tr {
    border-top: 1px solid #dfe2e5;
    margin: 0;
    padding: 0;
}
table tr:nth-child(2n),
thead {
    background-color: #f8f8f8;
}
table tr th {
    font-weight: bold;
    border: 1px solid #dfe2e5;
    border-bottom: 0;
    margin: 0;
    padding: 6px 13px;
}
table tr td {
    border: 1px solid #dfe2e5;
    margin: 0;
    padding: 6px 13px;
}
table tr th:first-child,
table tr td:first-child {
    margin-top: 0;
}
table tr th:last-child,
table tr td:last-child {
    margin-bottom: 0;
}

.CodeMirror-lines {
    padding-left: 4px;
}

.code-tooltip {
    box-shadow: 0 1px 1px 0 rgba(0,28,36,.3);
    border-top: 1px solid #eef2f2;
}

.md-fences,
code,
tt {
    border: 1px solid #e7eaed;
    background-color: #f8f8f8;
    border-radius: 3px;
    padding: 0;
    padding: 2px 4px 0px 4px;
    font-size: 0.9em;
}

code {
    background-color: #f3f4f4;
    padding: 0 2px 0 2px;
}

.md-fences {
    margin-bottom: 15px;
    margin-top: 15px;
    padding-top: 8px;
    padding-bottom: 6px;
}


.md-task-list-item > input {
  margin-left: -1.3em;
}

@media print {
    html {
        font-size: 13px;
    }
    table,
    pre {
        page-break-inside: avoid;
    }
    pre {
        word-wrap: break-word;
    }
}

.md-fences {
	background-color: #f8f8f8;
}
#write pre.md-meta-block {
	padding: 1rem;
    font-size: 85%;
    line-height: 1.45;
    background-color: #f7f7f7;
    border: 0;
    border-radius: 3px;
    color: #777777;
    margin-top: 0 !important;
}

.mathjax-block>.code-tooltip {
	bottom: .375rem;
}

.md-mathjax-midline {
    background: #fafafa;
}

#write>h3.md-focus:before{
	left: -1.5625rem;
	top: .375rem;
}
#write>h4.md-focus:before{
	left: -1.5625rem;
	top: .285714286rem;
}
#write>h5.md-focus:before{
	left: -1.5625rem;
	top: .285714286rem;
}
#write>h6.md-focus:before{
	left: -1.5625rem;
	top: .285714286rem;
}
.md-image>.md-meta {
    /*border: 1px solid #ddd;*/
    border-radius: 3px;
    padding: 2px 0px 0px 4px;
    font-size: 0.9em;
    color: inherit;
}

.md-tag {
    color: #a7a7a7;
    opacity: 1;
}

.md-toc { 
    margin-top:20px;
    padding-bottom:20px;
}

.sidebar-tabs {
    border-bottom: none;
}

#typora-quick-open {
    border: 1px solid #ddd;
    background-color: #f8f8f8;
}

#typora-quick-open-item {
    background-color: #FAFAFA;
    border-color: #FEFEFE #e5e5e5 #e5e5e5 #eee;
    border-style: solid;
    border-width: 1px;
}

/** focus mode */
.on-focus-mode blockquote {
    border-left-color: rgba(85, 85, 85, 0.12);
}

header, .context-menu, .megamenu-content, footer{
    font-family: "Segoe UI", "Arial", sans-serif;
}

.file-node-content:hover .file-node-icon,
.file-node-content:hover .file-node-open-state{
    visibility: visible;
}

.mac-seamless-mode #typora-sidebar {
    background-color: #fafafa;
    background-color: var(--side-bar-bg-color);
}

.md-lang {
    color: #b4654d;
}

.html-for-mac .context-menu {
    --item-hover-bg-color: #E6F0FE;
}

#md-notification .btn {
    border: 0;
}

.dropdown-menu .divider {
    border-color: #e5e5e5;
}

.ty-preferences .window-content {
    background-color: #fafafa;
}

.ty-preferences .nav-group-item.active {
    color: white;
    background: #999;
}

 .typora-export li, .typora-export p, .typora-export,  .footnote-line {white-space: normal;} 
</style>
</head>
<body class='typora-export' >
<div  id='write'  class = 'is-mac'><h1><a name="ç´¢å¼•æ–‡ä»¶çš„ç”Ÿæˆå…­ï¼‰httpswwwamazingkoalacomcnluceneindex" class="md-header-anchor"></a><a href='https://www.amazingkoala.com.cn/Lucene/Index/'><span>ç´¢å¼•æ–‡ä»¶çš„ç”Ÿæˆï¼ˆå…­ï¼‰</span></a></h1><p>&emsp;&emsp;<span>æœ¬æ–‡æ‰¿æ¥</span><a href='https://www.amazingkoala.com.cn/Lucene/Index/2020/0110/125.html'><span>ç´¢å¼•æ–‡ä»¶çš„ç”Ÿæˆï¼ˆäº”ï¼‰</span></a><span>ç»§ç»­ä»‹ç»å‰©ä½™çš„å†…å®¹ï¼Œä¸‹é¢å…ˆç»™å‡ºç”Ÿæˆç´¢å¼•æ–‡ä»¶.timã€.tipçš„æµç¨‹å›¾ã€‚</span></p><h2><a name="ç”Ÿæˆç´¢å¼•æ–‡ä»¶timtipçš„æµç¨‹å›¾" class="md-header-anchor"></a><span>ç”Ÿæˆç´¢å¼•æ–‡ä»¶.timã€.tipçš„æµç¨‹å›¾</span></h2><p><span>å›¾1ï¼š</span></p><p><img src="http://www.amazingkoala.com.cn/uploads/lucene/index/ç´¢å¼•æ–‡ä»¶çš„ç”Ÿæˆ/ç´¢å¼•æ–‡ä»¶çš„ç”Ÿæˆï¼ˆå…­ï¼‰/1.png"></p><p>&emsp;&emsp;<span>ä¸Šä¸€ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬ä»‹ç»äº†æ‰§è¡Œ</span><code>ç”Ÿæˆä¸€ä¸ªæˆ–å¤šä¸ªNodeBlock</code><span>çš„è§¦å‘æ¡ä»¶ï¼Œæœ¬æ–‡å°±å…¶å®ç°è¿‡ç¨‹å±•å¼€ä»‹ç»ï¼ŒåŒæ ·çš„ï¼Œä¸‹æ–‡ä¸­å‡ºç°çš„å¹¶ä¸”æ²¡æœ‰ä½œå‡ºè§£é‡Šçš„åè¯ï¼Œè¯´æ˜å·²ç»åœ¨æ–‡ç« </span><a href='https://www.amazingkoala.com.cn/Lucene/Index/2020/0110/125.html'><span>ç´¢å¼•æ–‡ä»¶çš„ç”Ÿæˆï¼ˆäº”ï¼‰</span></a><span>ä¸­ä»‹ç»ï¼Œä¸åœ¨æœ¬æ–‡ä¸­èµ˜è¿°ã€‚</span></p><h2><a name="ç”Ÿæˆä¸€ä¸ªæˆ–å¤šä¸ªnodeblockçš„æµç¨‹å›¾" class="md-header-anchor"></a><span>ç”Ÿæˆä¸€ä¸ªæˆ–å¤šä¸ªNodeBlockçš„æµç¨‹å›¾</span></h2><p><span>å›¾2ï¼š</span></p><p><img src="http://www.amazingkoala.com.cn/uploads/lucene/index/ç´¢å¼•æ–‡ä»¶çš„ç”Ÿæˆ/ç´¢å¼•æ–‡ä»¶çš„ç”Ÿæˆï¼ˆå…­ï¼‰/2.png"></p><h3><a name="pendingentryé›†åˆ" class="md-header-anchor"></a><span>PendingEntryé›†åˆ</span></h3><p><span>å›¾3ï¼š</span></p><p><img src="http://www.amazingkoala.com.cn/uploads/lucene/index/ç´¢å¼•æ–‡ä»¶çš„ç”Ÿæˆ/ç´¢å¼•æ–‡ä»¶çš„ç”Ÿæˆï¼ˆå…­ï¼‰/3.png"></p><p>&emsp;&emsp;<span>æˆ‘ä»¬åœ¨ä¸Šä¸€ç¯‡æ–‡ç« ä¸­è¯´åˆ°ï¼Œtermæ ˆä¸­å­˜æ”¾äº†ä¸¤ç§ç±»å‹çš„ä¿¡æ¯ï¼šPendingTermå’ŒPendingBlockï¼Œå®ƒä»¬ä¸¤ä¸ªçš„ç±»å›¾å…³ç³»å¦‚ä¸‹æ‰€ç¤ºï¼š</span></p><p><span>å›¾4ï¼š</span></p><p><img src="http://www.amazingkoala.com.cn/uploads/lucene/index/ç´¢å¼•æ–‡ä»¶çš„ç”Ÿæˆ/ç´¢å¼•æ–‡ä»¶çš„ç”Ÿæˆï¼ˆå…­ï¼‰/4.png"></p><p>&emsp;&emsp;<span>æ•…å›¾2æµç¨‹å›¾çš„å‡†å¤‡æ•°æ®æ˜¯ä¸€ä¸ªPendingEntryé›†åˆï¼Œå®ƒå°±æ˜¯termæ ˆï¼ˆæœ¬äººå¯¹è¯¥é›†åˆçš„ç§°å‘¼ğŸ˜‚ï¼‰ï¼Œåœ¨æºç ä¸­å³pendingé“¾è¡¨ï¼Œå®šä¹‰å¦‚ä¸‹ï¼š</span></p><pre spellcheck="false" class="md-fences md-end-block md-fences-with-lineno ty-contain-cm modeLoaded" lang="java"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="java"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 35px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 27px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre><div class="CodeMirror-linenumber CodeMirror-gutter-elt"><div>1</div></div></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: -27px; width: 27px;"></div><div class="CodeMirror-gutter-wrapper CodeMirror-activeline-gutter" style="left: -27px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt CodeMirror-linenumber-show" style="left: 0px; width: 18px;">1</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">private</span> <span class="cm-keyword">final</span> <span class="cm-variable">List</span><span class="cm-operator">&lt;</span><span class="cm-variable">PendingEntry</span><span class="cm-operator">&gt;</span> <span class="cm-variable">pending</span> <span class="cm-operator">=</span> <span class="cm-keyword">new</span> <span class="cm-variable">ArrayList</span><span class="cm-operator">&lt;&gt;</span>();</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 22px;"></div><div class="CodeMirror-gutters" style="height: 22px;"><div class="CodeMirror-gutter CodeMirror-linenumbers" style="width: 26px;"></div></div></div></div></pre><h3><a name="ç”Ÿæˆä¸€ä¸ªæˆ–è€…å¤šä¸ªpendingblockåˆ°newblockä¸­" class="md-header-anchor"></a><span>ç”Ÿæˆä¸€ä¸ªæˆ–è€…å¤šä¸ªPendingBlockåˆ°newBlockä¸­</span></h3><p><span>å›¾5ï¼š</span></p><p><img src="http://www.amazingkoala.com.cn/uploads/lucene/index/ç´¢å¼•æ–‡ä»¶çš„ç”Ÿæˆ/ç´¢å¼•æ–‡ä»¶çš„ç”Ÿæˆï¼ˆå…­ï¼‰/5.png"></p><p>&emsp;&emsp;<span>åœ¨ä»‹ç»è¯¥æµç¨‹ç‚¹ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦äº†è§£ä¸‹PendingBlockç±»ä¸­çš„ä¸€äº›ä¿¡æ¯ï¼ŒPendingBlockç±»çš„å®šä¹‰å¦‚ä¸‹ï¼š</span></p><p><span>å›¾6ï¼š</span></p><p><img src="http://www.amazingkoala.com.cn/uploads/lucene/index/ç´¢å¼•æ–‡ä»¶çš„ç”Ÿæˆ/ç´¢å¼•æ–‡ä»¶çš„ç”Ÿæˆï¼ˆå…­ï¼‰/6.png"></p><p>&emsp;&emsp;<span>ç¬¬ä¸€æ¬¡æ‰§è¡Œå›¾2çš„æµç¨‹æ—¶ï¼ŒPendingEntryé›†åˆä¸­</span><strong><span>æ€»æ˜¯</span></strong><span>åªå­˜åœ¨PendingTermä¿¡æ¯ï¼Œé›†åˆä¸­çš„æ¯ä¸€ä¸ªå…ƒç´ ä»£è¡¨äº†ä¸€ä¸ªtermåŒ…å«çš„ä¿¡æ¯ï¼Œåœ¨æ‰§è¡Œå®Œå›¾2çš„æµç¨‹ä¹‹åï¼ŒPendingEntryé›†åˆä¸­çš„ä¿¡æ¯å°±è½¬åŒ–ä¸ºä¸€ä¸ªPendingBlockï¼ˆæˆ‘ä»¬è®°ä¸ºblock1ï¼‰ï¼Œå®ƒç”¨æ¥æè¿°å…·æœ‰ç›¸åŒå‰ç¼€çš„termé›†åˆçš„ä¿¡æ¯ï¼Œå¹¶ä¸”é‡æ–°æ·»åŠ åˆ°termæ ˆä¸­ï¼›å¦‚æœä¸‹ä¸€æ¬¡æ‰§è¡Œå›¾2çš„æµç¨‹æ—¶ï¼ŒPendingEntryé›†åˆä¸­åŒ…å«äº†PendingTermå’ŒPendingBlockï¼ˆblock1ï¼‰ä¸¤ç§ç±»å‹ä¿¡æ¯ï¼Œé‚£ä¹ˆåœ¨æ‰§è¡Œå®Œå›¾2çš„æµç¨‹åï¼ŒPendingEntryé›†åˆä¸­çš„ä¿¡æ¯å°±ä¼šè½¬åŒ–ä¸ºä¸€ä¸ªæ–°çš„PendingBlockï¼ˆæˆ‘ä»¬è®°ä¸ºblock2ï¼‰ï¼Œç”±æ­¤å¯è§æ‰§è¡Œå›¾1çš„æµç¨‹ç‚¹</span><code>ç”Ÿæˆä¸€ä¸ªæˆ–å¤šä¸ªNodeBlock</code><span>å®é™…æ˜¯é€šè¿‡</span><strong><span>åµŒå¥—</span></strong><span>çš„æ–¹å¼å°†æ‰€æœ‰termçš„ä¿¡æ¯è½¬åŒ–ä¸ºä¸€ä¸ªPendingBlockã€‚</span></p><p>&emsp;&emsp;<span>å›¾6ä¸­</span><font color=Red><span>çº¢æ¡†</span></font><span>æ ‡æ³¨çš„indexæè¿°çš„æ˜¯ä¸€ä¸ªPendingBlockè‡ªèº«çš„ä¿¡æ¯ï¼Œè€Œ</span><font color=Blue><span>è“æ¡†</span></font><span>æ ‡æ³¨çš„subIndicesæè¿°çš„æ˜¯è¯¥PendingBlockä¸­åµŒå¥—çš„PendingBlockä¿¡æ¯çš„é›†åˆï¼ˆå³æ¯ä¸€ä¸ªPendingBlockçš„indexä¿¡æ¯ï¼‰ï¼Œå¯¹äºblock1è·Ÿblock2æ¥è¯´ï¼Œblock2å¯¹è±¡ä¸­çš„subIndicesä¸­åŒ…å«äº†ä¸€æ¡ä¿¡æ¯ï¼Œè¯¥ä¿¡æ¯ä¸ºblock1ä¸­çš„indexä¿¡æ¯ï¼Œè‡³äºindexä¸­åŒ…å«äº†å…·ä½“å“ªäº›ä¿¡æ¯ï¼Œä¸‹æ–‡ä¸­ä¼šå±•å¼€ä»‹ç»ã€‚</span></p><p>&emsp;&emsp;<span>æˆ‘ä»¬å›åˆ°</span><code>ç”Ÿæˆä¸€ä¸ªæˆ–è€…å¤šä¸ªPendingBlockåˆ°newBlockä¸­</code><span>çš„æµç¨‹ç‚¹çš„ä»‹ç»ã€‚</span></p><p><strong><span>ä¸ºä»€ä¹ˆå¯èƒ½ä¼šç”Ÿæˆå¤šä¸ªPendingBlock</span></strong></p><p>&emsp;&emsp;<span>å¯¹äºå¾…å¤„ç†çš„PendingEntryé›†åˆï¼Œå®ƒåŒ…å«çš„ä¿¡æ¯æ•°é‡è‡³å°‘æœ‰minItemsInBlockä¸ªï¼ˆä¸ºä»€ä¹ˆä½¿ç”¨</span><strong><span>è‡³å°‘</span></strong><span>è¿™ä¸ªå‰¯è¯ï¼Œè§æ–‡ç« </span><a href='https://www.amazingkoala.com.cn/Lucene/Index/2020/0110/125.html'><span>ç´¢å¼•æ–‡ä»¶çš„ç”Ÿæˆï¼ˆäº”ï¼‰</span></a><span>ï¼‰ï¼Œå› ä¸ºè¿™æ˜¯å›¾2çš„æµç¨‹çš„è§¦å‘æ¡ä»¶ï¼Œå¦‚æœPendingEntryé›†åˆä¸­çš„æ•°é‡è¿‡å¤šï¼Œé‚£ä¹ˆéœ€è¦å¤„ç†ä¸ºå¤šä¸ªPendingBlockï¼Œè¿™ä¹ˆå¤„ç†çš„åŸå› ä»¥åŠå¤„ç†æ–¹å¼åœ¨æºç ä¸­ä¹Ÿç»™å‡ºäº†è§£é‡Šï¼Œè§ </span><a href='https://github.com/LuXugang/Lucene-7.5.0/blob/master/solr-7.5.0/lucene/core/src/java/org/apache/lucene/codecs/blocktree/BlockTreeTermsWriter.java' target='_blank' class='url'>https://github.com/LuXugang/Lucene-7.5.0/blob/master/solr-7.5.0/lucene/core/src/java/org/apache/lucene/codecs/blocktree/BlockTreeTermsWriter.java</a><span> ä¸­çš„ void writeBlocks(int prefixLength, int count)æ–¹æ³•ï¼š</span></p><pre spellcheck="false" class="md-fences md-end-block md-fences-with-lineno ty-contain-cm modeLoaded" lang="text"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="text"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 35px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 27px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre><div class="CodeMirror-linenumber CodeMirror-gutter-elt"><div>1</div></div></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: -27px; width: 27px;"></div><div class="CodeMirror-gutter-wrapper CodeMirror-activeline-gutter" style="left: -27px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt CodeMirror-linenumber-show" style="left: 0px; width: 18px;">1</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">The count is too large for one block, so we must break it into "floor" blocks, where we record the leading label of the suffix of the first term in each floor block, so at search time we can jump to the right floor block.  We just use a naive greedy segmenter here: make a new floor block as soon as we have at least minItemsInBlock.  This is not always best: it often produces a too-small block as the final block:</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 110px;"></div><div class="CodeMirror-gutters" style="height: 110px;"><div class="CodeMirror-gutter CodeMirror-linenumbers" style="width: 26px;"></div></div></div></div></pre><p>&emsp;&emsp;<span>ä¸Šè¿°çš„æ³¨é‡Šå¤§æ„ä¸ºï¼šå¦‚æœä¸€ä¸ªblockå¤ªå¤§ï¼Œé‚£ä¹ˆå°±åˆ’åˆ†ä¸ºå¤šä¸ªfloor blockï¼Œå¹¶ä¸”åœ¨æ¯ä¸ªfloor blockä¸­è®°å½•åç¼€çš„ç¬¬ä¸€ä¸ªå­—ç¬¦ä½œä¸ºleading labelï¼Œä½¿å¾—åœ¨æœç´¢é˜¶æ®µèƒ½é€šè¿‡å‰ç¼€ä»¥åŠleading labelç›´æ¥è·³è½¬åˆ°å¯¹åº”çš„floor blockï¼Œå¦å¤–æ¯ç”Ÿæˆä¸€ä¸ªfloor blockï¼Œè¯¥blockä¸­è‡³å°‘åŒ…å«äº†minItemsInBlockæ¡PendingEntryä¿¡æ¯ï¼Œè¿™ç§åˆ’åˆ†æ–¹å¼é€šå¸¸ä¼šä½¿å¾—æœ€åä¸€ä¸ªblockä¸­åŒ…å«çš„ä¿¡æ¯æ•°é‡è¾ƒå°‘ã€‚</span></p><p>&emsp;&emsp;<span>å¯¹äºä¸Šè¿°çš„æ³¨é‡Šæˆ‘ä»¬ä¼šæå‡ºä»¥ä¸‹å‡ ä¸ªé—®é¢˜ï¼š</span></p><ul><li><span>é—®é¢˜ä¸€ï¼šåˆ’åˆ†å‡ºä¸€ä¸ªfloor blockçš„è§„åˆ™æ˜¯ä»€ä¹ˆ</span></li><li><span>é—®é¢˜äºŒï¼šåœ¨æœç´¢é˜¶æ®µï¼Œå¦‚ä½•é€šè¿‡å‰ç¼€è·Ÿleading labelå¿«é€Ÿè·³è½¬åˆ°å¯¹åº”floor block</span></li></ul><p><strong><span>é—®é¢˜ä¸€ï¼šåˆ’åˆ†å‡ºä¸€ä¸ªfloor blockçš„è§„åˆ™æ˜¯ä»€ä¹ˆ</span></strong></p><p>&emsp;&emsp;<span>ä½¿ç”¨ä¸‹é¢ä¸¤ä¸ªé˜ˆå€¼ä½œä¸ºåˆ’åˆ†å‚æ•°ï¼š</span></p><ul><li><span>minItemsInBlockï¼šé»˜è®¤å€¼ä¸º25</span></li><li><span>maxItemsInBlockï¼šé»˜è®¤å€¼ä¸º48ï¼Œå®ƒçš„å€¼å¯ä»¥è®¾å®šçš„èŒƒå›´å¦‚ä¸‹æ‰€ç¤ºï¼š</span></li></ul><pre spellcheck="false" class="md-fences md-end-block md-fences-with-lineno ty-contain-cm modeLoaded" lang="java"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="java"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 35px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 27px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre><div class="CodeMirror-linenumber CodeMirror-gutter-elt"><div>1</div></div></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: -27px; width: 27px;"></div><div class="CodeMirror-gutter-wrapper CodeMirror-activeline-gutter" style="left: -27px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt CodeMirror-linenumber-show" style="left: 0px; width: 18px;">1</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">minItemsInBlock</span> <span class="cm-operator">&lt;</span> <span class="cm-variable">maxItemsInBlock</span> <span class="cm-operator">&lt;</span> <span class="cm-number">2</span><span class="cm-operator">*</span>(<span class="cm-variable">minItemsInBlock</span><span class="cm-operator">-</span><span class="cm-number">1</span>)</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 22px;"></div><div class="CodeMirror-gutters" style="height: 22px;"><div class="CodeMirror-gutter CodeMirror-linenumbers" style="width: 26px;"></div></div></div></div></pre><p>&emsp;&emsp;<span>åˆ’åˆ†çš„è§„åˆ™ï¼šæ¯å¤„ç†å›¾3ä¸­PendingEntryé›†åˆä¸­Nä¸ªä¿¡æ¯ï¼Œå°±ç”Ÿæˆä¸€ä¸ªblockï¼Œé™¤äº†ç¬¬ä¸€ä¸ªblockï¼ˆæˆ‘ä»¬ç§°ä¹‹ä¸ºhead blockï¼‰ï¼Œå…¶ä»–blockéƒ½æ˜¯floor blockï¼Œå…¶ä¸­Nå€¼ä¸å°äºminItemsInBlockï¼Œå¹¶ä¸”PendingEntryé›†åˆä¸­æœªå¤„ç†çš„ä¿¡æ¯ä¸å°äºmaxItemsInBlockï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</span></p><p><span>å›¾7ï¼š</span></p><p><img src="http://www.amazingkoala.com.cn/uploads/lucene/index/ç´¢å¼•æ–‡ä»¶çš„ç”Ÿæˆ/ç´¢å¼•æ–‡ä»¶çš„ç”Ÿæˆï¼ˆå…­ï¼‰/7.png"></p><p>&emsp;&emsp;<span>éšåå°†head blockä»¥åŠfloor blockä¸­åŒ…å«çš„PendingEntryä¿¡æ¯åˆ†åˆ«ç”ŸæˆPendingBlockï¼Œä¸¤ç§ç±»å‹çš„blockç”Ÿæˆçš„PendingBlockçš„å·®å¼‚æ€§ç”¨å›¾6ä¸­</span><font color=gray><span>é»‘ç°è‰²</span></font><span>æ ‡æ³¨çš„ä¸‰ä¸ªä¿¡æ¯æ¥åŒºåˆ†ï¼š</span></p><ul><li><span>prefixï¼šç›¸åŒå‰ç¼€ + leading labelï¼Œæ‰€æœ‰blockçš„ç›¸åŒå‰ç¼€éƒ½æ˜¯ä¸€æ ·çš„ï¼Œå¯¹äºhead blockï¼Œå®ƒç”Ÿæˆçš„PendingBlockå¯¹åº”çš„prefixçš„å€¼åªæœ‰ç›¸åŒå‰ç¼€</span></li><li><span>isFloorï¼šæ˜¯å¦ä¸ºfloor block</span></li><li><span>floorLeadByteï¼šè¯¥å­—æ®µå³leading label</span></li></ul><p>&emsp;&emsp;<span>åœ¨ç”ŸæˆPendingBlockçš„è¿‡ç¨‹ä¸­ï¼ŒåŒæ—¶ä¹Ÿæ˜¯å°†termä¿¡æ¯å†™å…¥åˆ°</span><a href='https://www.amazingkoala.com.cn/Lucene/suoyinwenjian/2019/0401/43.html'><span>ç´¢å¼•æ–‡ä»¶.timp</span></a><span>æ–‡ä»¶çš„è¿‡ç¨‹ï¼Œå³ç”ŸæˆNodeBlockçš„è¿‡ç¨‹ï¼Œå…¶ä¸­ä¸€ä¸ªblockï¼ˆhead blockæˆ–è€…floor blockï¼‰å¯¹åº”ç”Ÿæˆä¸€ä¸ªNodeBlockï¼Œä¸Šæ–‡ä¸­æˆ‘ä»¬è¯´åˆ°PendingEntryä¿¡æ¯å¯åˆ†ä¸ºä¸¤ç§ç±»å‹ï¼šPendingTermå’ŒPendingBlockï¼Œæ ¹æ®blockä¸­çš„ä¸åŒç±»å‹çš„PendingEntryï¼Œåœ¨ç´¢å¼•æ–‡ä»¶.timpä¸­å†™å…¥çš„æ•°æ®ç»“æ„ä¹Ÿæ˜¯ä¸åŒçš„ã€‚</span></p><h4><a name="blockä¸­åªåŒ…å«pendingterm" class="md-header-anchor"></a><span>blockä¸­åªåŒ…å«PendingTerm</span></h4><p><span>å›¾8ï¼š</span></p><p><img src="http://www.amazingkoala.com.cn/uploads/lucene/index/ç´¢å¼•æ–‡ä»¶çš„ç”Ÿæˆ/ç´¢å¼•æ–‡ä»¶çš„ç”Ÿæˆï¼ˆå…­ï¼‰/8.png"></p><p>&emsp;&emsp;<span>æ ¹æ®blockä¸­åŒ…å«çš„PendingEntryçš„ç±»å‹ï¼Œå¯ä»¥ç»†åŒ–çš„å°†</span><code>blockä¸­åªåŒ…å«PendingTerm</code><span>å¯¹åº”ç”Ÿæˆçš„NodeBlockç§°ä¸ºOuterNodeï¼Œ</span><code>blockä¸­è‡³å°‘åŒ…å«PendingBlock</code><span>ï¼ˆè‡³å°‘åŒ…å«PendingBlockæ„æ€æ˜¯åªåŒ…å«PendingBlockæˆ–è€…åŒæ—¶åŒ…å«PendingBlockä»¥åŠPendingTermï¼‰å¯¹åº”ç”Ÿæˆçš„NodeBlockç§°ä¸ºInnerNodeã€‚</span></p><p>&emsp;&emsp;<span>å›¾8ä¸­ï¼Œæ‰€æœ‰çš„å­—æ®µçš„å«ä¹‰å·²ç»åœ¨æ–‡ç« </span><a href='https://www.amazingkoala.com.cn/Lucene/suoyinwenjian/2019/0401/43.html'><span>ç´¢å¼•æ–‡ä»¶ä¹‹tim&amp;&amp;tip</span></a><span>ä»‹ç»ï¼Œä¸ä¸€ä¸€å±•å¼€ä»‹ç»ï¼Œè¿™é‡Œæ³¨æ„çš„æ˜¯</span><font color=Red><span>çº¢æ¡†</span></font><span>æ ‡æ³¨çš„8ä¸ªå­—æ®µæè¿°çš„æ˜¯ä¸€ä¸ªtermçš„ä¿¡æ¯ï¼Œè¯¥ä¿¡æ¯åœ¨ç”Ÿæˆ</span><a href='https://www.amazingkoala.com.cn/Lucene/suoyinwenjian/2019/0324/42.html'><span>ç´¢å¼•æ–‡ä»¶.doc</span></a><span>ã€</span><a href='https://www.amazingkoala.com.cn/Lucene/suoyinwenjian/2019/0324/41.html'><span>posã€.pay</span></a><span>ä¹‹åï¼Œä½¿ç”¨IntBlockTermStateå°è£…è¿™äº›ä¿¡æ¯ï¼Œå¹¶ä¸”é€šè¿‡åšä¸ºå›¾1ä¸­çš„å‡†å¤‡æ•°æ®å­˜å‚¨åˆ°ç´¢å¼•æ–‡ä»¶.timä¸­ï¼Œè¿™8ä¸ªå­—æ®µçš„ä»‹ç»è§æ–‡ç« </span><a href='https://www.amazingkoala.com.cn/Lucene/Index/2020/0110/125.html'><span>ç´¢å¼•æ–‡ä»¶çš„ç”Ÿæˆï¼ˆäº”ï¼‰ä¹‹tim&amp;&amp;tip</span></a><span>ã€‚</span></p><p>&emsp;&emsp;<span>å½“outerNodeå†™å…¥åˆ°ç´¢å¼•æ–‡ä»¶.timä¹‹åï¼Œå®ƒåœ¨ç´¢å¼•æ–‡ä»¶ä¸­.timçš„èµ·å§‹ä½ç½®å°±ç”¨å›¾6çš„fpä¿¡æ¯æè¿°ï¼Œç”±äºblockä¸­å­˜åœ¨PendingTermï¼Œæ•…å›¾6ä¸­çš„hasTermsä¿¡æ¯è¢«ç½®ä¸ºtrueï¼Œè‡³æ­¤ï¼Œå›¾6ä¸­PendingBlockåŒ…å«çš„æ‰€æœ‰ä¿¡æ¯éƒ½å·²ç»ä»‹ç»å®Œæ¯•ï¼Œå¹¶ä¸”æˆ‘ä»¬ä¹Ÿæ˜ç™½äº†PendingBlockçš„ä½œç”¨ï¼šç”¨æ¥æè¿°ä¸€ä¸ªNodeBlockçš„æ‰€æœ‰ä¿¡æ¯ã€‚</span></p><h4><a name="blockä¸­è‡³å°‘åŒ…å«pendingblock" class="md-header-anchor"></a><span>blockä¸­è‡³å°‘åŒ…å«PendingBlock</span></h4><p>&emsp;&emsp;<span>æˆ‘ä»¬ç»“åˆä¸€ä¸ªä¾‹å­æ¥ä»‹ç»è¿™ç§æƒ…å†µã€‚</span></p><p><span>å›¾9ï¼š</span></p><p><img src="http://www.amazingkoala.com.cn/uploads/lucene/index/ç´¢å¼•æ–‡ä»¶çš„ç”Ÿæˆ/ç´¢å¼•æ–‡ä»¶çš„ç”Ÿæˆï¼ˆå…­ï¼‰/9.png"></p><p>&emsp;&emsp;<span>å¾…å¤„ç†çš„PendingEntryé›†åˆå¦‚å›¾9æ‰€ç¤ºï¼Œå…¶ä¸­é™¤äº†&quot;ab&quot;æ˜¯ä¸€ä¸ªPendingBlockï¼Œå…¶ä»–éƒ½æ˜¯PendingTermï¼Œå°†è¯¥PendingEntryé›†åˆç”Ÿæˆä¸€ä¸ªNodeBlockï¼Œå®ƒæ˜¯InnerNodeã€‚</span></p><p><span>å›¾10ï¼š</span></p><p><img src="http://www.amazingkoala.com.cn/uploads/lucene/index/ç´¢å¼•æ–‡ä»¶çš„ç”Ÿæˆ/ç´¢å¼•æ–‡ä»¶çš„ç”Ÿæˆï¼ˆå…­ï¼‰/10.png"></p><p>&emsp;&emsp;<span>ç”±å›¾10ä¸­</span><font color=Red><span>çº¢æ¡†</span></font><span>æ ‡æ³¨çš„ä¿¡æ¯æè¿°äº†PendingTermä»¥åŠPendingBlockå¯¹åº”çš„Suffixå­—æ®µçš„å·®å¼‚æ€§ï¼Œå¯¹äºPendingBlockï¼Œå®ƒå¯¹åº”çš„Suffixä¸­å¤šäº†ä¸€ä¸ªindexå­—æ®µï¼Œè¯¥å­—æ®µçš„å€¼å°±æ˜¯ä»¥&quot;ab&quot;ä¸ºå‰ç¼€çš„PendingBlockä¸­çš„fpä¿¡æ¯ï¼ˆå³å›¾6ä¸­çš„fpä¿¡æ¯ï¼‰ï¼Œå®ƒæè¿°äº†&quot;ab&quot;ä¸ºå‰ç¼€çš„PendingBlockå¯¹åº”çš„NodeBlockä¿¡æ¯åœ¨ç´¢å¼•æ–‡ä»¶.timä¸­çš„èµ·å§‹ä½ç½®ã€‚</span></p><p>&emsp;&emsp;<span>æœ€åæ ¹æ®å›¾7ä¸­åˆ’åˆ†åçš„blockåœ¨åˆ†åˆ«ç”ŸæˆPendingBlockä¹‹åï¼Œå°†è¿™äº›PendingBlockæ·»åŠ åˆ°é“¾è¡¨newBlockä¸­ï¼ŒnewBlockçš„å®šä¹‰å¦‚ä¸‹ï¼š</span></p><pre spellcheck="false" class="md-fences md-end-block md-fences-with-lineno ty-contain-cm modeLoaded" lang="java"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="java"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 35px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 27px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre><div class="CodeMirror-linenumber CodeMirror-gutter-elt"><div>1</div></div></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: -27px; width: 27px;"></div><div class="CodeMirror-gutter-wrapper CodeMirror-activeline-gutter" style="left: -27px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt CodeMirror-linenumber-show" style="left: 0px; width: 18px;">1</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">private</span> <span class="cm-keyword">final</span> <span class="cm-variable">List</span><span class="cm-operator">&lt;</span><span class="cm-variable">PendingBlock</span><span class="cm-operator">&gt;</span> <span class="cm-variable">newBlocks</span> <span class="cm-operator">=</span> <span class="cm-keyword">new</span> <span class="cm-variable">ArrayList</span><span class="cm-operator">&lt;&gt;</span>();</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 22px;"></div><div class="CodeMirror-gutters" style="height: 22px;"><div class="CodeMirror-gutter CodeMirror-linenumbers" style="width: 26px;"></div></div></div></div></pre><p>&emsp;&emsp;<span>æ·»åŠ åˆ°é“¾è¡¨newBlockä¸­çš„ç›®çš„å°±æ˜¯ä¸ºä¸‹ä¸€ä¸ªæµç¨‹</span><code>åˆå¹¶PendingBlock</code><span>åšå‡†å¤‡çš„ã€‚</span></p><p><strong><span>é—®é¢˜äºŒï¼šåœ¨æœç´¢é˜¶æ®µï¼Œå¦‚ä½•é€šè¿‡å‰ç¼€è·Ÿleading labelå¿«é€Ÿè·³è½¬åˆ°å¯¹åº”floor block</span></strong></p><p>&emsp;&emsp;<span>åœ¨ä¸‹ä¸€ç¯‡æ–‡ç« ä»‹ç»ç´¢å¼•æ–‡ä»¶.tipæ—¶å›ç­”è¯¥é—®é¢˜ã€‚</span></p><h3><a name="æ‰€æœ‰pendingblockåˆå¹¶åˆ°ç¬¬ä¸€ä¸ªpendingblock" class="md-header-anchor"></a><span>æ‰€æœ‰PendingBlockåˆå¹¶åˆ°ç¬¬ä¸€ä¸ªPendingBlock</span></h3><p><span>å›¾11ï¼š</span></p><p><img src="http://www.amazingkoala.com.cn/uploads/lucene/index/ç´¢å¼•æ–‡ä»¶çš„ç”Ÿæˆ/ç´¢å¼•æ–‡ä»¶çš„ç”Ÿæˆï¼ˆå…­ï¼‰/11.png"></p><p>&nbsp;</p><p>&emsp;&emsp;<span>åœ¨ä¸Šæ–‡ä¸­ï¼Œæ ¹æ®å›¾2ä¸­çš„PendingEntryé›†åˆï¼Œæˆ‘ä»¬ç”Ÿæˆäº†ä¸€ä¸ªæˆ–å¤šä¸ªPendingBlockï¼Œå¹¶ä¸”æ·»åŠ åˆ°äº†newBlockä¸­ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</span></p><p><span>å›¾12ï¼š</span></p><p><img src="http://www.amazingkoala.com.cn/uploads/lucene/index/ç´¢å¼•æ–‡ä»¶çš„ç”Ÿæˆ/ç´¢å¼•æ–‡ä»¶çš„ç”Ÿæˆï¼ˆå…­ï¼‰/12.png"></p><p>&emsp;&emsp;<span>åœ¨å½“å‰æµç¨‹ä¸­ï¼Œæˆ‘ä»¬éœ€è¦å°†newBlockä¸­ç¬¬äºŒä¸ªPendingBlockå¼€å§‹åé¢æ‰€æœ‰çš„PendingBlockçš„ä¿¡æ¯åˆå¹¶åˆ°ç¬¬ä¸€ä¸ªPendingBlockä¸­ï¼Œåˆå¹¶çš„ä¿¡æ¯åŒ…å«ä»¥ä¸‹å†…å®¹ï¼š</span></p><ul><li><span>floorLeadByte</span></li><li><span>fp</span></li><li><span>hasTerms</span></li></ul><p>&emsp;&emsp;<span>éšåå°†è¿™äº›ä¿¡æ¯å†™å…¥åˆ°</span><a href='https://www.amazingkoala.com.cn/Lucene/yasuocunchu/2019/0220/35.html'><span>FST</span></a><span>ä¸­ï¼Œå…¶ä¸­ç›¸åŒå‰ç¼€å€¼ï¼ˆå³å›¾2ä¸­PendingEntryé›†åˆçš„æœ€é•¿ç›¸åŒå‰ç¼€å€¼ï¼‰ä½œä¸ºFSTçš„inputValueï¼Œåˆå¹¶çš„ä¿¡æ¯ä½œä¸ºFSTçš„outValueã€‚inputValueã€outValueçš„æ¦‚å¿µè§æ–‡ç« </span><a href='https://www.amazingkoala.com.cn/Lucene/yasuocunchu/2019/0220/35.html'><span>FSTç®—æ³•ï¼ˆä¸Šï¼‰</span></a><span>ï¼Œä¸èµ˜è¿°ã€‚</span></p><p>&emsp;&emsp;<span>å›¾12ä¸­ï¼Œå¦‚æœ</span><code>blockä¸­è‡³å°‘åŒ…å«PendingBlock</code><span>ï¼Œé‚£ä¹ˆå¯¹åº”PendingBlockä¸­çš„subIndicesä¸­çš„ä¿¡æ¯ä¹Ÿéœ€è¦å†™å…¥åˆ°FSTä¸­ã€‚</span></p><h3><a name="åˆå¹¶åçš„pendingblockæ·»åŠ åˆ°termæ ˆ" class="md-header-anchor"></a><span>åˆå¹¶åçš„PendingBlockæ·»åŠ åˆ°termæ ˆ</span></h3><p><span>å›¾13ï¼š</span></p><p><img src="http://www.amazingkoala.com.cn/uploads/lucene/index/ç´¢å¼•æ–‡ä»¶çš„ç”Ÿæˆ/ç´¢å¼•æ–‡ä»¶çš„ç”Ÿæˆï¼ˆå…­ï¼‰/13.png"></p><p>&emsp;&emsp;<span>æœ€ååˆå¹¶çš„PendingBlockæ·»åŠ åˆ°termæ ˆï¼Œç­‰å¾…è¢«åµŒå¥—åˆ°æ–°çš„PendingBlockä¸­ï¼Œæœ€ç»ˆï¼Œç»è¿‡å±‚å±‚çš„åµŒå¥—ï¼Œä¸€ä¸ªåŸŸä¸­äº§ç”Ÿçš„æ‰€æœ‰çš„PendingBlockéƒ½ä¼šè¢«åµŒå¥—åˆ°ä¸€ä¸ªPendingBlockä¸­ï¼Œè¯¥PendingBlockçš„indexä¿¡æ¯åœ¨åé¢çš„æµç¨‹ä¸­å°†ä¼šè¢«å†™å…¥åˆ°ç´¢å¼•æ–‡ä»¶.tipä¸­ã€‚</span></p><h2><a name="ç»“è¯­" class="md-header-anchor"></a><span>ç»“è¯­</span></h2><p>&emsp;&emsp;<span>åŸºäºç¯‡å¹…ï¼Œå‰©ä½™çš„å†…å®¹å°†åœ¨ä¸‹ä¸€ç¯‡æ–‡ç« ä¸­å±•å¼€ã€‚</span></p><p><a href='http://www.amazingkoala.com.cn/attachment/Lucene/Index/ç´¢å¼•æ–‡ä»¶çš„ç”Ÿæˆ/ç´¢å¼•æ–‡ä»¶çš„ç”Ÿæˆï¼ˆå…­ï¼‰/ç´¢å¼•æ–‡ä»¶çš„ç”Ÿæˆï¼ˆå…­ï¼‰.zip'><span>ç‚¹å‡»</span></a><span>ä¸‹è½½é™„ä»¶</span></p><p>&nbsp;</p></div>
</body>
</html>